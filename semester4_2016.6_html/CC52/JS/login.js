var page=new T.Webpage({type:0,oninit:function(){this.bindLoginDialogEvent();this.initErrorTip()},initErrorTip:function(){if(T.config.pageInfo.errMsg!==""){T.g("btn-login").click();T.hide("tj-tip");T.g("tj-error").innerHTML=T.config.pageInfo.errMsg;T.show("tj-error")}},setCookie:function(a,b){T.cookie.set(a,b,{expires:3600*24*365,path:"/"})},getCookie:function(a){return T.cookie.get(a)},initLoginTemplate:function(){var a=T.config.pageInfo;var c=T.config.systemConfig;var b=this;passport.use("login",{tangram:true},function(e){var f=new e.passport.login({product:"holmes_maa",staticPage:T.format(document.location.protocol+"//#{0}#{1}#{2}",location.host,c.webRoot,a.passport_jumpurl),u:T.format(document.location.protocol+"//#{0}#{1}#{2}",location.host,c.webRoot,a.passport_returnurl),loginMerge:true,hasPlaceholder:true,charset:"utf-8",memberPass:true,isPhone:false,safeFlag:0});f.on("render",function(g){b.onReady(g,f)});f.on("beforeSubmit",function(g){var h=b.type;b.setCookie("hm_usertype",h)});var d="login-psp";baidu.g(d).innerHTML="";f.render(d);b.loginDialog.show()})},bindLoginDialogEvent:function(){var a=this;T.on(document,"click",function(f){var d=T.event.getTarget(f);var b=d.id;if(b==="btn-login"||b==="use-it-btn"||b==="header-use"){var c=T.cookie.get("hm_usertype");if(!a.loginDialog){a.loginDialog=new T.ui.Dialog({className:"login-dialog",titleText:"登录",width:320,content:AceTemplate.format("login-dialog-template",LOGIN_VAR),isModal:true,zIndex:999});a.loginDialog.hide();a.initLoginTemplate();if(T.g("change-cas")){T.on("change-cas","click",function(e){T.event.stop(e);var h=T.g("cas-code");var g=T.getAttr("cas-code","src").replace(/&random=\d*/,"")+"&random="+(new Date()).getTime();T.setAttr(h,"src",g)})}}else{a.loginDialog.show()}if(!a.loginTabs){a.loginTabs=new T.ui.Tabs({containerId:"login-container",selectedIndex:c||T.config.pageInfo.errMsg!==""?1:0,isToggle:false,onchange:function(e){a.loginDialog.show();a.type=e;if(+e===0){T.hide("tj-error");T.show("tj-tip")}}})}}else{if(b==="safe-check"){a.changeSafeCheck()}else{if(b==="tj-submit"){a.submit()}else{if(T.dom.hasClass(d,"modal")){T.dom.one(".pass-generalError-error").innerHTML="";T.hide("tj-error");T.show("tj-tip");a.loginDialog.hide()}}}}})},onReady:function(d,g){var b=T.g("psp");var f=T.dom.query(".pass-form-item-memberPass",b);T.array.each(f,function(h){T.dom.hide(h)});var a=g.getElement("submitWrapper");var e=T.dom.query("a.pass-fgtpwd",a);var c;T.array.each(e,function(h){T.dom.hide(h);c=h.href});T.setAttr("psp-forget","href",c)},checkPassword:function(a){if(this.isSafeCheck()){return !ucsl.verify()}else{return a===""}},submit:function(){var f=this;var i=T.g("tj-error");var h;var a=T.g("uc-username");var g=T.g("uc-password");var b=T.g("uc-valicode");var c=a?T.trim(a.value):"";var j=g?T.trim(g.value):"";var k=b?T.trim(b.value):"";a.value=c;g.value=j;b.value=k;if(c===""||this.checkPassword(j)||k===""){h="用户名，密码或者验证码不能为空"}if(h){T.hide("tj-tip");i.innerHTML=h;T.show(i);T.event.preventDefault(event);return false}var e=this.type;var d=T.g("appid");f.setCookie("hm_usertype",e);f.setCookie("hm_username",c);if(+e===1){this.setAppScope(d,[12,32,6])}},setAppScope:function(d,e){for(var b=0,a=e.length;b<a;b++){var c=e[b];var f=T.dom.create("input",{type:"hidden",name:"appscope[]",value:c});T.dom.insertBefore(f,d)}},safeCheck:function(){if(+this.type!==1){return}var a=this.isSafeCheck();T.g("safe-check").checked=a;var b=this;if(a){if(!this.ucslLoaded){if(ucsl.support()){ucsl.init({fid:"uc-safe-pwd-input",tabout:"uc-valicode",tabindex:2,style:{width:210,height:28},ready:function(){b.ucslLoaded=true},fail:function(){}})}}T.removeClass("uc-safe-pwd-input","uc-safe-pwd-input-hidden")}else{T.addClass("uc-safe-pwd-input","uc-safe-pwd-input-hidden")}},changeSafeCheck:function(){var a=T.g("safe-check").checked?1:0;this.setCookie("hm_safecheck",a);this.safeCheck()},getSafeCheck:function(){return this.getCookie("hm_safecheck")},isSafeCheck:function(){if(!ucsl.support()){T.g("safe-check").disabled=true;return false}return +this.getSafeCheck()===1?true:false}});T.dom.ready(function(){var d=T.ui.create(T.ui.Slider,{sliderWrapper:"customer-slider",controls:false,width:710,height:86,auto:false,pause:2000});var b=T.ui.create(T.ui.Slider,{sliderWrapper:"header-banner",controls:true,height:600,duration:100,auto:false,lazyLoad:true});function i(){var l=1280;var j=document.documentElement.clientWidth;var k=T.g("mtj-video");if(j<1280){T.dom.setStyle("mtj-video","left",(j-l)/2+"px")}else{T.dom.setStyle("mtj-video","left",0)}}function f(){var k=T.dom.one("#header-banner .slider-control-direction");var j=document.documentElement.clientWidth;if(k){if(j<1200){T.hide(k)}else{T.show(k)}}}T.on(window,"resize",function(k){var j=document.documentElement.clientWidth;b.options.width=j;b._init();i();f()});i();f();var g=T.g("mtj-video");if(g&&T.dom.getAttr(g,"src")===""){T.dom.setAttr(g,"src",T.dom.getAttr(g,"data-src"))}var h=document.documentElement.clientHeight;var c=T.dom.one(".product-img img");var e=T.dom.getPosition(c);if(h>e.top){T.dom.setAttr(c,"src",T.dom.getAttr(c,"data-src").slice(0,-3)+"jpg")}function a(u){var n=T.dom.query(".product-img img");var w=T.dom.query(".product");var m=document.documentElement.scrollTop||document.body.scrollTop;var z=document.documentElement.clientHeight;for(var s=0;s<n.length;s++){var k=n[s];var p=T.dom.getPosition(k);var x=w[s];var o=T.dom.getPosition(x);var q=x.offsetHeight;var y=T.dom.getAttr(k,"src");if(m+z>p.top){if(y.slice(-11)==="loading.gif"){T.dom.setAttr(n[s],"src",T.dom.getAttr(k,"data-src").slice(0,-3)+"jpg")}}if(o.top+q/2<=m+z&&!T.dom.getAttr(n[s],"loading")){if(y.slice(-11)!=="loading.gif"){T.dom.setAttr(n[s],"src",y.slice(0,-3)+"gif");T.dom.setAttr(n[s],"loading","true")}}}if(m>700){T.dom.setStyle("mtj-video","position","static");T.dom.setStyle("mtj-img","position","static")}else{T.dom.setStyle("mtj-video","position","fixed");T.dom.setStyle("mtj-img","position","fixed")}var j=w[w.length-1];var l=T.dom.getPosition(j);if(l.top<m+z){var v=T.dom.query("#customer-list img");for(var s=0,t=v.length;s<t;s++){var r=v[s];if(T.dom.getAttr(r,"src")!==""){break}else{T.dom.setAttr(r,"src",T.dom.getAttr(r,"data-src"))}}}}a();T.on(document,"scroll",a);T.on(window,"scroll",a)});var casCode=T.g("cas-code");if(casCode){setInterval(function(){var a=baidu.getAttr(casCode,"src").replace(/&random=\d*/,"")+"&random="+(new Date()).getTime();baidu.setAttr(casCode,"src",a)},26*1000)};